---
title: sdcc
toc: true
---
[toc]

# sdcc 编译器
## 简介
[SDCC](https://sdcc.sourceforge.net/)（Small Device C Compiler） 是一个可重新定位的、优化的标准 C 编译器套件。
## 特点
1. 语言支持：支持C语言编译，提供了C语言的高级抽象能力，使得代码更易于编写和维护。
2. 目标架构：除了8051系列外，还支持其他微控制器架构，如PIC、Z80、MCS-51等。
3. 代码生成：从C代码生成汇编再到机器码，提供了更高的抽象层次，代码可读性和可维护性更好，但可能在某些情况下不如手工汇编代码效率高。
4. 开发环境：可以集成到多种IDE中（如Visual Studio Code），支持更广泛的开发工具链和开发环境。
5. 优化：提供了多种优化选项，可以自动优化代码，但优化效果受限于编译器的算法和设置。
6. 社区与资源：作为开源项目，拥有一个较大的社区，提供了丰富的文档、示例和支持。
7. 使用场景：适用于需要快速开发、代码可读性和维护性更重要的项目，特别是当使用C语言能满足需求时。
## 安装
* ubuntu
```shell
sudo apt install sdcc

```
## 简单使用
```shell
# 实例：将 test.c 文件编译成 mcs51单片机可食用的固件test.hex
sdcc -mmcs51 test.c -o test.hex
```
## sdcc编译时生成的系列文件
SDCC 在编译过程中会生成一系列的文件，每个文件都有其特定的作用。以下是常见的SDCC编译过程中生成的文件及其用途：  
1. .ihx 文件  
    * 作用：这是Intel Hex Format文件，是编译器生成的主要输出文件。.ihx文件包含程序代码和数据在内存中的地址和内容，用于烧录到微控制器中。  
    * 用途：这是一个中间格式，通常需要转换成.hex或.bin文件以供烧录工具使用。
2. .asm 文件
    * 作用：这是由C代码生成的汇编代码文件。SDCC在编译C代码时会将其转换为汇编语言。
    * 用途：用于查看编译器如何将C代码转换为汇编代码，帮助理解代码的优化和执行方式，也可以手动优化或调试。

3. .lst 文件
    * 作用：列表文件，包含汇编代码和对应的机器码、源代码行号等详细信息。
    * 用途：用于调试和优化过程，可以看到每条汇编指令对应的机器码和源代码行，帮助跟踪程序的执行流程。

4. .map 文件
    * 作用：内存映射文件，显示程序中每个变量、函数的位置以及程序如何分配内存。
    * 用途：帮助开发者了解程序的内存使用情况，特别是在内存受限的嵌入式系统中。

5. .sym 文件
    * 作用：符号表文件，包含了程序中所有符号（如变量名、函数名）及其在内存中的地址。
    * 用途：在调试过程中，符号表可以帮助将地址映射回符号名，增强调试体验。

6. .rel 文件
    * 作用：可重定位的目标文件，包含编译后的代码和数据，但地址还没有被固定。
    * 用途：这些文件可用于链接多个模块的程序，SDCC在链接阶段会使用它们。

7. .cdb 文件
    * 作用：调试信息文件，包含了调试器所需的信息，如变量名、行号等。
    * 用途：在使用支持SDCC的调试器时提供调试信息。

8. .hex 文件
    * 作用：虽然不是SDCC默认生成的，但可以通过packihx工具将.ihx文件转换为.hex文件。.hex文件是Intel Hex格式的最终烧录文件。
    * 用途：直接用于烧录到目标微控制器中。

9. .bin 文件
    * 作用：同样不是默认生成的，需要从.ihx或.hex文件转换而来，.bin文件是二进制格式。
    * 用途：某些烧录工具或引导加载程序可能需要.bin格式的文件。
