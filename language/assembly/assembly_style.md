---
title: 汇编风格
toc: true
---
[toc]

# 汇编语法风格
* 在 **DOS/Windows** 下的汇编采用 **Intel** 风格，**Unix/Linux** 多采用 **AT&T** 风格。
* 在linux系统下常用的汇编器
    * AT&T格式: as
    * Intel格式: NASM
## 使用系统调用
* linux 使用一些寄存器来指定要使用的系统调用号及该系统调用所需的参数:
    * `eax`:存放系统调用号
    * `ebx`:系统调用的第一个参数
    * `ecx`:第二个参数，后面的参数类推  
**note:**<u>当系统调用所需的参数大于5时，全部参数将一次放在一块连续的内存中,ebx存放指向这块内存的指针</u>
* 通过中断(`int 0x80`)进入内核
* 系统调用结束后，返回值存放在 `eax` 中
## AT&T
* 寄存器名要加`%`
* 用`$`前缀表示立即操作数
* 源操作数在前，目标操作数在后
* 操作数的字长由操作符的最后一个字母决定
* 绝对转移和调用指令 `jump/call` 的操作数前面要加前缀 `*`
* 远程转移指令和远程子调用指令的操作码为：`ljump/lcall`
* 远程返回指令：`lret`
* 内存操作数的寻址方式：`section:disp(base, index, scale)`
## Intel
* 目标操作数在前，源操作数在后
* 远程转移指令和远程子调用指令的操作码为：`jump far /call far`
* 远程返回指令：`ret for`
* 内存操作数的寻址方式：`section:[base + index * scale + disp]`
