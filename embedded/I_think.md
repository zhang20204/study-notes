---
title: I think
toc: true
---
[toc]
# 嵌入式开发中的地址
## 嵌入式硬件的地址
在嵌入式中总要和地址打交道，但影响地址的因素是什么呢?

### flash 和 ram 的地址和大小
* flash的地址和大小  
编译好的固件是要烧写到 flash 中的，而决定 flash 的起始地址和大小的是芯片厂商。  
厂商会决定指定型号的芯片使用多大的 flash ，也就会设定该 flash 的起始地址和大小。
* ram 的地址和大小  
要想程序运行，就需要把必要的数据加载到 ram 中，在此之前必定要先知道 ram 的大小和位置，和flash 一样，ram 的起始地址和大小也是由芯片厂商决定的。
# 开发板上电后的执行位置
开发版上电之后从哪儿里开始执行呢？
## 从不同位置启动程序
芯片厂商通常会根据具体芯片的设计需要，设置一种或多种启动方式。例如从内部 flash 启动。此时芯片上电之后将从内部的 flash 寻找程序开始执行。

通常来说， 如果没有对内部 flash 划分时，将从 flah 的起始地址开始执行。
## 根据芯片配置固件
在芯片层面确定了启动位置之后，那么就需要在链接生产固件时通过连接脚本指定必要的硬件信息(例如 flash 在哪，ram 在哪等等)和固件被烧录的位置。

链接脚本举例:
```
MEMORY
{
    FLASH (rx) : ORIGIN = 0x08000000, LENGTH = 128K
    RAM (rwx)  : ORIGIN = 0x20000000, LENGTH = 32K
}

SECTIONS
{
    .text : { *(.text*) } > FLASH
    .data : { *(.data*) } > RAM AT > FLASH
    .bss  : { *(.bss*)  } > RAM
}
```
